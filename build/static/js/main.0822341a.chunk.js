(this["webpackJsonpphonebook-react"]=this["webpackJsonpphonebook-react"]||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t(16),o=t.n(c),r=t(6),s=t(3),i=t(4),l=t(0),u=function(e){var n=e.handleSubmit,t=e.handleChange,a=e.person;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{name:"name",value:a.name,onChange:t})]}),Object(l.jsxs)("div",{children:["number:"," ",Object(l.jsx)("input",{name:"number",value:a.number,onChange:t})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.handleChandleSearch,t=e.textFilter;return Object(l.jsxs)("div",{children:["filter:"," ",Object(l.jsx)("input",{type:"search",onChange:n,value:t})]})},h=function(e){var n=e.persons,t=e.handleClickDelete;return"undefined"===typeof n?"":n.map((function(e){return Object(l.jsxs)("p",{children:[e.name," : ",e.number,Object(l.jsx)("button",{onClick:t,"data-id":e.id,"data-name":e.name,children:"delete"})]},e.id)}))};function b(e){var n=e.notificationMessage,t={backgroundColor:"#D3D3D3",borderStyle:"solid",borderRadius:"5px",paddingLeft:"15px",paddingRight:"15px"},a=Object(s.a)(Object(s.a)({},t),{},{borderColor:"#077E06",color:"077E06"}),c=Object(s.a)(Object(s.a)({},t),{},{borderColor:"#FF0101",color:"FF0101"});return 0===n.message.length?"":Object(l.jsx)("div",{children:Object(l.jsx)("h3",{style:"success"===n.type?a:c,children:n.message})})}var j=function(e){var n=e.handleSubmit,t=e.handleChangeNewPerson,a=e.newPerson,c=e.handleChangeSearch,o=e.textFilter,r=e.personsToShow,s=e.handleClickDelete,i=e.notificationMessage;return Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(b,{notificationMessage:i}),Object(l.jsx)(u,{handleSubmit:n,handleChange:t,person:a}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(d,{handleChandleSearch:c,textFilter:o}),Object(l.jsx)(h,{persons:r,handleClickDelete:s})]})},f=t(5),m=t.n(f),g="/api",p=function(){return m.a.get("".concat(g,"/persons")).then((function(e){return e.data})).catch((function(e){console.log("".concat(e))}))};function O(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([]),u=Object(i.a)(o,2),d=u[0],h=u[1],b=Object(a.useState)({name:"",number:""}),f=Object(i.a)(b,2),O=f[0],x=f[1],v=Object(a.useState)(""),C=Object(i.a)(v,2),S=C[0],y=C[1],w=Object(a.useState)({message:"",type:""}),k=Object(i.a)(w,2),D=k[0],F=k[1];Object(a.useEffect)((function(){p().then((function(e){c(e),h(e)}))}),[]);var P=function(e,n){F({message:e,type:n}),setTimeout((function(){F({message:"",type:""})}),2500)};return Object(l.jsx)(j,{handleSubmit:function(e){e.preventDefault();var n,a,o=t.filter((function(e){return e.name===O.name}))[0];console.log(o),"undefined"!==typeof o?confirm("".concat(o.name," is already added to phonebook, replace the old number with a new one?"))&&(n=o.id,a=O,m.a.put("".concat(g,"/persons/").concat(n),a).then((function(e){return console.log(e),e.data})).catch((function(e){console.log(" ".concat(e))}))).then((function(e){console.log(e),p().then((function(e){c(e),h(e)})),P("Updated ".concat(O.name),"success"),y(""),x({name:"",number:""})})):function(e){return m.a.post("".concat(g,"/persons"),e).then((function(e){return e.data})).catch((function(e){console.log("".concat(e))}))}(O).then((function(e){c(t.concat(e)),h(t.concat(e)),x({name:"",number:""}),y(""),P("Added ".concat(O.name),"success")}))},handleChangeNewPerson:function(e){x(Object(s.a)(Object(s.a)({},O),{},Object(r.a)({},e.target.name,e.target.value)))},newPerson:O,handleChangeSearch:function(e){y(e.target.value),h(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value)})))},textFilter:S,personsToShow:d,handleClickDelete:function(e){var n;console.log(e.target.dataset.id),console.log(e.target.dataset.name),confirm("Delete ".concat(e.target.dataset.name," ?"))&&(n=e.target.dataset.id,m.a.delete("".concat(g,"/persons/").concat(n)).then((function(e){return console.log(e),e.data})).catch((function(e){throw e}))).then((function(n){console.log("".concat(n)),P("the person '".concat(e.target.dataset.name,"' was deleted from server"),"success")})).catch((function(n){console.log("".concat(n)),P("the person '".concat(e.target.dataset.name,"' was already deleted from server"),"error")})).finally((function(){p().then((function(e){c(e),h(e)}))}))},notificationMessage:D})}o.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0822341a.chunk.js.map